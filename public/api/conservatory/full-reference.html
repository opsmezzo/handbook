<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta charset="utf-8">

  <title>OpsMezzo Handbook</title>

  <meta name="description" content="The OpsMezzo Handbook" />
  <meta name="author" content="Nodejitsu Inc" />
  <meta name="viewport" content="width=device-width" />

  <link rel="stylesheet" href="https://versions.nodejitsu.com/id:home/css/jitsu.min.css">
  <link rel="stylesheet" href="/css/github.css">
  <link rel="stylesheet" href="/css/menus.css">
  <link rel="stylesheet" href="/css/api.css">
  <link rel="icon" type="image/png" href="img/favicon.png">
  <style>
    .navigation h1 { overflow: visible; }
    .opsmezzo {
      background: #fff url('/img/opsmezzo-logo-text.png') no-repeat 0 0;
      margin: -20px 0 0 0;
      float: left;
      height: 96px;
      width: 280px;
      text-indent: -9999px;
    }
  </style>
</head>

<body class="container">
  <section id="navigation" class="navigation">
    <nav class="row">
      <h1>
        <a href="/" class="opsmezzo" title="Back to the homepage">OpsMezzo</a>
      </h1>
      <a href="#navigation" class="mobile btn ss-rows"></a>
      <a href="https://www.opsmezzo.com" class="login right btn" title="Back to opsmezzo.com">
        <s class="ss-home" role="presentation"></s>
        home
      </a>
    </nav>
  </section>
  <div class="faux-columns">
    <section class="documentation row">
      <aside class="sidebar threehalfcol" role="complementary">
        <div id="toc">
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/faq" class="title">FAQ</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/using-conventions" class="title">CLI Conventions</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/system-json" class="title">Working with system.json</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/configuration" class="title">Configuration management</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/remote-dependencies" class="title">Remote dependencies</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/lifecycle" class="title">System lifecycle</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/reference" class="title">system.json Reference</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/quill" class="title">Configuring with quill</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/resources" class="title">CLI Resources</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/aliases" class="title">Common Aliases</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/config" class="title">Quill configuration</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/updating-systems" class="title">Updating systems</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/configuration" class="title">Working with configuration</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/baton" class="title">Orchestrating with baton</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/providers" class="title">Adding IaaS Providers</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/resources" class="title">CLI Resources</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/config" class="title">Baton configuration</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/bootstrapping" class="title">Bootstrapping Servers</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/ssh-keys" class="title">Managing SSH keys</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/instruments" class="title">Monitoring with Instruments</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/instruments/multiplexing" class="title">High Performance Multiplexing</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/instruments/metrics" class="title">Predefined Metrics & Events</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/instruments/streams" class="title">Understanding Streams</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/instruments/reactors" class="title">Writing Custom Reactors</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/api" class="title">RESTful APIs</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/api/composer" class="title">Composer API Reference</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/api/conservatory" class="title">Conservatory API Reference</a>
    </span>
  </span>
</div>
</div>
      </aside>

      <article class="column eighthalfcol last" id="content" role="main"><div>
  <div class="page-details">
    <h1 class="title">Single-page Conservatory API Reference</h1>
    <hr>
  </div>
  <div class="content"><pre><code>  $ ./conservatory/bin/provisioner 


          ___  ____ _   _  ___  ___  ___ _  __ ____ ____ ____  ___ _  __
         /    /   / /\  / /__  /_   /__/ |  / /___/  /  /   / /__/ /__/
        /___ /___/ /  \/ ___/ /__  /  \  |_/ /   /  /  /___/ /  \  /

        Â© 2010 Nodejitsu Inc.
        All Rights Reserved - www.nodejitsu.com


  conservatory has started successfully as provisioner @ 127.0.0.1 on port 9003...</code></pre>
<p>Conservatory exposes a RESTful backend for managing <code>Servers</code>, <code>Roles</code>, and <code>Groups</code>. This is the backend for  <a href="/baton"><code>baton</code></a>. <strong>This is all RESTful routes for all resources for this API.</strong></p>
<hr>

<table class="fullref">
  <thead>
    <th>Resource</th>
    <th>Route</th>
    <th>Body</th>
    <th>Description</th>
  </thead>
  <tr>
    <td>Servers</td>
    <td><code>GET /servers</code></td>
    <td>None</td>
    <td>Returns a list of all servers.</td>
  </tr>
  <tr>
    <td>Servers</td>
    <td><code>GET /servers/:id</code></td>
    <td>None</td>
    <td>Returns the informations about the server with <code>id</code>.</td>
  </tr>
  <tr>
    <td>Servers</td>
    <td><code>POST /servers/:id</code></td>
    <td>JSON</td>
    <td>Adds an existing server to conservatory. <strong>Will not provision from your IaaS provider.</strong></td>
  </tr>
  <tr>
    <td>Servers</td>
    <td><code>PUT /servers/:id</code></td>
    <td>JSON</td>
    <td>Updates the server with the specified <code>id</code>.</td>
  </tr>
  <tr>
    <td>Servers</td>
    <td><code>DELETE /servers/:id</code></td>
    <td>None</td>
    <td>Removes a server from conservatory. <strong>Will not remove the server from your IaaS provider.</strong></td>
  </tr>
  <tr>
    <td>Servers</td>
    <td><code>POST /servers/tagged</code></td>
    <td>JSON</td>
    <td>Returns a list of all servers with the specified <code>body.tags</code>.</td>
  </tr>
  <tr>
    <td>Servers</td>
    <td><code>POST /servers/uid</code></td>
    <td>JSON</td>
    <td>Returns the unique identifier for the server information.</td>
  </tr>
  <tr>
    <td>Clusters</td>
    <td><code>GET /clusters/:cluster/servers</code></td>
    <td>None</td>
    <td>Lists all servers with the specified <code>cluster</code>.</td>
  </tr><br>  <tr>
    <td>Roles</td>
    <td><code>GET /roles</code></td>
    <td>None</td>
    <td>Returns a list of all roles.</td>
  </tr>
  <tr>
    <td>Roles</td>
    <td><code>GET /roles/:name</code></td>
    <td>None</td>
    <td>Returns the informations about the role with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Roles</td>
    <td><code>POST /roles/:name</code></td>
    <td>JSON</td>
    <td>Creates a new role.</td>
  </tr>
  <tr>
    <td>Roles</td>
    <td><code>PUT /roles/:name</code></td>
    <td>JSON</td>
    <td>Adds a version to the role with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Roles</td>
    <td><code>DELETE /roles/:name</code></td>
    <td>None</td>
    <td>Deletes the corresponding role with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Roles</td>
    <td><code>DELETE /roles/:name/:version</code></td>
    <td>None</td>
    <td>Removes the <code>version</code> for the role with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Roles</td>
    <td><code>GET /roles/:name/servers</code></td>
    <td>None</td>
    <td>Lists all servers for the role with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>GET /groups</code></td>
    <td>None</td>
    <td>Returns a list of all groups.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>GET /groups/:name</code></td>
    <td>None</td>
    <td>Returns the informations about the group with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>POST /groups/:name</code></td>
    <td>JSON</td>
    <td>Creates a new group.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>PUT /groups/:name</code></td>
    <td>JSON</td>
    <td>Updates the group with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>DELETE /groups/:name</code></td>
    <td>None</td>
    <td>Deletes the corresponding group with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>GET /groups/:name/servers</code></td>
    <td>None</td>
    <td>Lists all servers for the role with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>GET /groups/:name/servers/:id</code></td>
    <td>None</td>
    <td>Lists details for the server with IP <code>server</code> in group <code>group</code>.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>PUT /groups/:name/servers/:id</code></td>
    <td>None</td>
    <td>Updates the server with <code>id</code> in the group with <code>name</code>.</td>
  </tr>
  <tr>
    <td>Groups</td>
    <td><code>DELETE /groups/:name/servers/:id</code></td>
    <td>None</td>
    <td>Removes a server from conservatory. <strong>Will not remove the server from your IaaS provider.</strong></td>
  </tr>
  <tr>
    <td>Providers</td>
    <td><code>GET /providers/:provider/groups</code></td>
    <td>None</td>
    <td>Lists all groups for the specified provider.</td>
  </tr><br>  <tr>
    <td>Users</td>
    <td><code>GET /users/:name/servers</code></td>
    <td>None</td>
    <td>Lists all servers created by the user with <code>name</code>.</td>
  </tr>
</table>

</div>
</div></article>
    </section>
  </div>
  <!-- row -->

  <footer class="doormat">
    <section class="row">
      <dl class="twocol">
        <dt>Resources</dt>
        <dd>
          <a href="http://legal.nodejitsu.com/privacy">
            Privacy policy
          </a>
        </dd>
        <dd>
          <a href="http://legal.nodejitsu.com/terms-of-service">
            Terms of Service
          </a>
        </dd>
      </dl>
      <dl class="newsletter twocol right">
        <dt>Stay connected</dt>
        <dd>
          <ul class="social">
            <li>
              <a href="https://twitter.com/opsmezzo" class="ss-twitter ss-social-circle" title="Follow @opsmezzo on Twitter"></a>
            </li>
            <li>
              <a href="https://github.com/opsmezzo" class="ss-octocat ss-social-circle" title="Fork @opsmezzo on Github"></a>
            </li>
            <li class="copyright right">&copy; Nodejitsu Inc.</li>
          </ul>
        </dd>
      </dl>

    </section>
  </footer>
  <script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
  <script>
    hljs.tabReplace = '    ';
    hljs.initHighlightingOnLoad();
  </script>
  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
  <script src="/js/slugify.js"></script>
</body>
</html>
