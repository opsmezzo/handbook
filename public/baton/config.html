<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta charset="utf-8">

  <title>OpsMezzo Handbook</title>

  <meta name="description" content="The OpsMezzo Handbook" />
  <meta name="author" content="Nodejitsu Inc" />
  <meta name="viewport" content="width=device-width" />

  <link rel="stylesheet" href="https://versions.nodejitsu.com/id:home/css/jitsu.min.css">
  <link rel="stylesheet" href="/css/github.css">
  <link rel="stylesheet" href="/css/menus.css">
  <link rel="stylesheet" href="/css/api.css">
  <link rel="icon" type="image/png" href="img/favicon.png">
  <style>
    .opsmezzo {
      background: #fff url('/img/opsmezzo-logo-text.png') no-repeat 0 0;
      margin: 0;
      float: left;
      height: 96px;
      width: 280px;
      text-indent: -9999px;
    }
  </style>
</head>

<body class="container">
  <section id="navigation" class="navigation">
    <nav class="row">
      <h1>
        <a href="/" class="opsmezzo" title="Back to the homepage">OpsMezzo</a>
      </h1>
      <a href="#navigation" class="mobile btn ss-rows"></a>
      <a href="https://www.opsmezzo.com" class=" login right btn" title="Back to opsmezzo.com">
        <s class="ss-home" role="presentation"></s>
        home
      </a>
    </nav>
  </section>
  <div class="faux-columns">
    <section class="documentation row">
      <aside class="sidebar threehalfcol" role="complementary">
        <div id="toc">
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/faq" class="title">FAQ</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/using-conventions" class="title">CLI Conventions</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/system-json" class="title">Working with system.json</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/configuration" class="title">Configuration management</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/remote-dependencies" class="title">Remote dependencies</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/lifecycle" class="title">System lifecycle</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/system-json/reference" class="title">system.json Reference</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/api" class="title">RESTful APIs</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/api/composer" class="title">Composer API Reference</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/api/conservatory" class="title">Conservatory API Reference</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/quill" class="title">Using quill</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/resources" class="title">CLI Resources</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/aliases" class="title">Common Aliases</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/config" class="title">Quill configuration</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/updating-systems" class="title">Updating systems</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/quill/configuration" class="title">Working with configuration</a>
    </span>
  </span>
</div>
<div class="vertical-tabs">
  <span class="tree">
    <span class="page-details">
      <a href="/baton" class="title">Using baton</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/resources" class="title">CLI Resources</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/config" class="title">Baton configuration</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/bootstrapping" class="title">Bootstrapping Servers</a>
    </span>
  </span><span class="tree">
    <span class="page-details">
      <a href="/baton/ssh-keys" class="title">Managing SSH keys</a>
    </span>
  </span>
</div>
</div>
      </aside>

      <article class="column eighthalfcol last" id="content" role="main"><div>
  <div class="page-details">
    <h1 class="title">Baton configuration</h1>
    <hr>
  </div>
  <div class="content"><p>There are various local configuration values that you should be aware of when working with <code>baton</code>.</p>
<hr>

<h2>Available commands</h2>
<p>Working with local config in <code>baton</code> is just like working with local config in <code>quill</code> or <code>jitsu</code> and is provided by <a href="https://github.com/flatiron/cli-config">flatiron-cli-config</a>.</p>
<pre><code>baton conf
baton config list
baton config set &lt;key&gt; &lt;value&gt;
baton config get &lt;key&gt;
baton config delete &lt;key&gt;</code></pre>
<p>To view all of the local configuration you can run <code>baton conf</code></p>
<pre><code>  $ baton conf
  info:    Welcome to baton
  info:    It worked if it ends with baton ok
  info:    Executing command conf
  help:    Hello indexzero here is your /Users/charlie/.batonconf file:
  help:    If you&#39;d like to change a property try:
  help:    baton config set &lt;key&gt; &lt;value&gt;
  data:    
  data:    {
  data:        userconfig: &#39;/Users/Charlie/.batonconf&#39;,
  data:        password: &#39;********&#39;
  data:        directories: {
  data:            config: &#39;/Users/Charlie/.baton&#39;,
  data:            tmp: &#39;/Users/Charlie/.baton/tmp&#39;,
  data:            keys: &#39;/Users/Charlie/.ssh&#39;,
  data:            env: &#39;/Users/Charlie/.baton/env&#39;,
  data:            bootstrap: &#39;/Users/Charlie/.baton/bootstrap&#39;
  data:        },
  data:        composer: { host: &#39;ip.of.your.composer&#39;, port: &#39;9003&#39; },
  data:        username: &#39;indexzero&#39;,
  data:        remoteHost: &#39;ip.of.your.conservatory&#39;,
  data:        port: 9003,
  data:        bootstrap: { runOnError: true }
  data:    }
  data:    
  info:    baton ok</code></pre>
<hr>

<h2>Config Settings</h2>
<h3>colors</h3>
<ul>
<li>Default: <code>true</code></li>
<li>Type: Boolean</li>
</ul>
<p>Show colored output</p>
<h3>concurrency</h3>
<ul>
<li>Default: 75</li>
<li>Type: Number</li>
</ul>
<p>The concurrency with which to run SSH on servers</p>
<h3>remoteHost</h3>
<ul>
<li>Default: localhost</li>
<li>Type: String</li>
</ul>
<p>The provisioner API endpoint</p>
<h3>port</h3>
<ul>
<li>Default: 9003</li>
<li>Type: Number</li>
</ul>
<p>The port of the provisioner API endpoint</p>
<h3>username</h3>
<ul>
<li>Default: None</li>
<li>Type: String</li>
</ul>
<p>The username to connect to provisioner</p>
<h3>password</h3>
<ul>
<li>Default: None</li>
<li>Type: String</li>
</ul>
<p>The password to connect to provisioner</p>
<h3>tunnel</h3>
<ul>
<li>Default: None</li>
<li>Type: String</li>
</ul>
<p>The SSH tunnel to connect to the servers</p>
<h3>debug</h3>
<ul>
<li>Default: true</li>
<li>Type: Boolean</li>
</ul>
<p>Enable Debug logging</p>
<h3>keyname</h3>
<ul>
<li>Default: <code>id_rsa</code></li>
<li>Type: String</li>
</ul>
<p>Name of the default private key to use for SSH connections.</p>
<h3>userconfig</h3>
<ul>
<li>Default: &#39;.batonconfig&#39;</li>
<li>Type: String</li>
</ul>
<p>The user configuration file</p>
<h3>composer</h3>
<p>When bootstrapping servers, <code>baton</code> requires a valid composer server.</p>
<ul>
<li><strong>composer:host</strong> <em>(Default: None)</em> Remote host of the composer server.</li>
<li><strong>composer:port</strong> <em>(Default: 9003)</em> Port of the remote composer server.</li>
</ul>
<h3>ssl</h3>
<ul>
<li><strong>ssl:cert</strong> <em>(Default: None)</em> Location of the client SSL certificate to use when making requests to the remote <code>conservatory</code> or <code>composer</code> servers.</li>
<li><strong>ssl:key</strong> <em>(Default: None)</em> Location of the client SSL key to use when making requests to the remote <code>conservatory</code> or <code>composer</code> servers.</li>
</ul>
<h3>bootstrap</h3>
<p>When bootstrapping servers there are several configuration values available to you</p>
<ul>
<li><strong>bootstrap:runOnError</strong> <em>(Default <code>false</code>)</em> 
If set to <code>true</code> will not delete a given server if there is an error when bootstrapping.</li>
<li><strong>bootstrap:user</strong> <em>(Default: varies by provider)</em>
Remote user to use when SSHing into servers to bootstrap them.</li>
<li><strong>bootstrap:keys</strong> <em>(Default <code>~/.ssh/id_rsa</code>)</em>
Location of the SSH keys to use when bootstrapping servers</li>
<li><strong>bootstrap:poll:interval</strong> <em>(Default: <code>30000</code>)</em>
Interval to use when polling to get an active SSH connection during the bootstrap process.</li>
<li><strong>bootstrap:poll:max</strong> <em>(Default: <code>10</code>)</em>
Number of SSH polling attempts to make before marking a bootstrapped server as errored.</li>
</ul>
<h3>directories</h3>
<p>The directories used to store/retrieve extra configuration</p>
<ul>
<li><strong>directories:keys</strong> <em>(Default: <code>~/.ssh</code>)</em></li>
<li><strong>directories:config</strong> <em>(Default: <code>~/.baton</code>)</em></li>
<li><strong>directories:bootstrap</strong> <em>(Default: <code>~/.baton/bootstrap</code>)</em></li>
<li><strong>directories:env</strong> <em>(Default: <code>~/.baton/env</code>)</em></li>
<li><strong>directories:tmp</strong> <em>(Default: <code>~/.baton/tmp</code>)</em></li>
</ul>
</div>
</div></article>
    </section>
  </div>
  <!-- row -->

  <footer class="doormat">
    <section class="row">
      <dl class="twocol">
        <dt>Resources</dt>
        <dd>
          <a href="http://legal.nodejitsu.com/privacy">
            Privacy policy
          </a>
        </dd>
        <dd>
          <a href="http://legal.nodejitsu.com/terms-of-service">
            Terms of Service
          </a>
        </dd>
      </dl>
      <dl class="newsletter twocol right">
        <dt>Stay connected</dt>
        <dd>
          <ul class="social">
            <li>
              <a href="https://twitter.com/opsmezzo" class="ss-twitter ss-social-circle" title="Follow @opsmezzo on Twitter"></a>
            </li>
            <li>
              <a href="https://github.com/opsmezzo" class="ss-octocat ss-social-circle" title="Fork @opsmezzo on Github"></a>
            </li>
            <li class="copyright right">&copy; Nodejitsu Inc.</li>
          </ul>
        </dd>
      </dl>

    </section>
  </footer>
  <script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
  <script>
    hljs.tabReplace = '    ';
    hljs.initHighlightingOnLoad();
  </script>
  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
  <script src="/js/slugify.js"></script>
</body>
</html>
